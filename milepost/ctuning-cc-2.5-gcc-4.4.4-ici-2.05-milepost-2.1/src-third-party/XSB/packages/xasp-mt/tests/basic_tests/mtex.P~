:- ensure_loaded(xasp).

:- import smcInit/0, smcAddRule/2, smcCommitProgram/0 from sm_int.
:- import smcSetCompute/1, smComputeModel/0, smcExamineModel/1, smEnd/0 

cookex_all(Queue) :-
	smcInit,
	smcAddRule(a,[]),
	smcAddRule(b,[]),
	smcAddRule(d,[a,not(c)]),
	smcAddRule(c,[b,not(d)]),
	smcCommitProgram,
	write('All Solutions: '),nl,
	(   smComputeModel,
	    smcExamineModel(Model),
	    thread_send_message(Queue,solution(Model)),
	    fail
	;
	    thread_send_message(Queue,no_more_solutions),
	    smEnd  ).

test:- 
	message_queue_create(Queue,[]),
	thread_create(cookex_all(Queue),_T),
	read_models(Queue).


	thread_get_message(Queue,Message)
