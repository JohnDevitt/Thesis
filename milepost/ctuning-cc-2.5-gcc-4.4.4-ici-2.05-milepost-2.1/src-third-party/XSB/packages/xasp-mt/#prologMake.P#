

:- import wrap/2 from wrapping. 

clean:- 
	shell('rm -f *dylib xasppkg.xwam *.o xsb_wrap_xasppkg.c').

remake_all:- 
	shell('rm -f *dylib *.o xsb_wrap_xasppkg.c'),
	% 1) make wrapper
	wrap('xasppkg.H','xsb_wrap_xasppkg.c'),
	% 2) compile xasppkg
	shell(['g++ -I/Users/macuser/XSB/XSB/config/i386-apple-darwin8.9.1-mt -I/Users/macuser/XSB/XSB/emu -I/Users/macuser/XSB/XSB/packages/xasp/smodels -c -o xasppkg.o xasppkg.c']),
	% 3) compile xsb_wrap_xasppkg
	shell(['gcc -I/Users/macuser/XSB/XSB/config/i386-apple-darwin8.9.1-mt -I/Users/macuser/XSB/XSB/emu -I/Users/macuser/XSB/XSB/packages/xasp/smodels -c xsb_wrap_xasppkg.c']),
	% 4) make dylib
	shell(['g++ -I/Users/macuser/XSB/XSB/config/i386-apple-darwin8.9.1-mt -I/Users/macuser/XSB/XSB/emu -I/Users/macuser/XSB/XSB/packages/xasp/smodels -lm ',
	'-dynamiclib -undefined dynamic_lookup -single_module -nostartfiles ',
	'-o xasppkg.dylib xasppkg.o xsb_wrap_xasppkg.o ',
	'/Users/macuser/XSB/XSB/packages/xasp/smodels/.libs/libsmodels.a']).

make:- 
	shell('rm -f *dylib *.o'),
	xsb_configuration(install_dir,Install),
	xsb_configuration(configuration,Config),
	writeln('--- compiling xasppkg.c'),
	shell(['g++ -I/',Install,'/config/',Config,
	       ' -I/',Install,'/emu',
	       ' -I/',Install,'/packages/xasp/smodels -c -o xasppkg.o xasppkg.c']),
	writeln('--- compiling xsb_wrap_xasppkg'),
	shell(['gcc -I/',Install,'/config/',Config,
	       ' -I/',Install,'/emu',
	       ' -I/',Install,'/packages/xasp/smodels -c xsb_wrap_xasppkg.c']),
	writeln('--- compiling shared object'),
	shell(['g++ -I/',Install,'/config/',Config,
	       ' -I/',Install,'/emu',
	       ' -I/',Install,'/packages/xasp/smodels -lm ',
	       '-dynamiclib -undefined dynamic_lookup -single_module -nostartfiles ',
	       '-o xasppkg.dylib ',
	       'xasppkg.o xsb_wrap_xasppkg.o ',Install,'/packages/xasp/smodels/.libs/libsmodels.a']).

end_of_file.

oldmake:- 
	shell('rm -f *dylib *.o'),
	% 1) compile xasppkg
	shell(['g++ -I/Users/macuser/XSB/XSB/config/i386-apple-darwin8.9.1-mt -I/Users/macuser/XSB/XSB/emu -I/Users/macuser/XSB/XSB/packages/xasp/smodels -c -o xasppkg.o xasppkg.c']),
	% 2) compile xsb_wrap_xasppkg
	shell(['gcc -I/Users/macuser/XSB/XSB/config/i386-apple-darwin8.9.1-mt -I/Users/macuser/XSB/XSB/emu -I/Users/macuser/XSB/XSB/packages/xasp/smodels -c xsb_wrap_xasppkg.c']),
	% 3) make dylib
	shell(['g++ -I/Users/macuser/XSB/XSB/config/i386-apple-darwin8.9.1-mt -I/Users/macuser/XSB/XSB/emu -I/Users/macuser/XSB/XSB/packages/xasp/smodels -lm ',
	'-dynamiclib -undefined dynamic_lookup -single_module -nostartfiles ',
	'-o xasppkg.dylib xasppkg.o xsb_wrap_xasppkg.o ',
	'/Users/macuser/XSB/XSB/packages/xasp/smodels/.libs/libsmodels.a']).





